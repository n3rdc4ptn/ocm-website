<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700;800&display=swap" rel=stylesheet><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://ocm.software/main.149ee2ce1aa8812f5fd465c462d63d3dd0d86e521c8b89175459e9a3bcb07d64d7c53973863451a85170b0214e99eccdadebf87257b931099acda105023a2d8b.css integrity="sha512-FJ7izhqogS9f1GXEYtY9PdDYblIci4kXVFnpo7ywfWTXxTlzhjRRqFFwsCFOmezNrev4cle5MQmazaEFAjotiw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><style>@import 'https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700;800&display=swap'</style><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Deployment scenario using an aggregate(d) component | Open Component Model</title><meta name=description content="Deploying a microservice architecture with components."><link rel=canonical href=https://ocm.software/docs/guides/complex-component-structure-deployment/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Deployment scenario using an aggregate(d) component"><meta property="og:description" content="Deploying a microservice architecture with components."><meta property="og:url" content="https://ocm.software/docs/guides/complex-component-structure-deployment/"><meta property="og:site_name" content="Open Component Model"><meta property="article:published_time" content="2023-06-20T10:00:00+00:00"><meta property="article:modified_time" content="2023-06-20T10:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content><meta name=twitter:creator content><meta name=twitter:title content="Deployment scenario using an aggregate(d) component"><meta name=twitter:description content="Deploying a microservice architecture with components."><meta name=twitter:card content="summary"><meta name=twitter:image:alt content="Deployment scenario using an aggregate(d) component"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://ocm.software/#/schema/organization/1","name":"OCM","url":"https://ocm.software/","sameAs":["https://github.com/open-component-model"],"logo":{"@type":"ImageObject","@id":"https://ocm.software/#/schema/image/1","url":"https://ocm.software/","width":512,"height":512,"caption":"OCM"},"image":{"@id":"https://ocm.software/#/schema/image/1"}},{"@type":"WebSite","@id":"https://ocm.software/#/schema/website/1","url":"https://ocm.software/","name":"Open Component Model","description":"","publisher":{"@id":"https://ocm.software/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://ocm.software/docs/guides/complex-component-structure-deployment/","url":"https://ocm.software/docs/guides/complex-component-structure-deployment/","name":"Deployment scenario using an aggregate(d) component","description":"Deploying a microservice architecture with components.","isPartOf":{"@id":"https://ocm.software/#/schema/website/1"},"about":{"@id":"https://ocm.software/#/schema/organization/1"},"datePublished":"2023-06-20T10:00:00CET","dateModified":"2023-06-20T10:00:00CET","breadcrumb":{"@id":"https://ocm.software/docs/guides/complex-component-structure-deployment/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://ocm.software/docs/guides/complex-component-structure-deployment/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://ocm.software/docs/guides/complex-component-structure-deployment/"]}]},{"@type":"BreadcrumbList","@id":"https://ocm.software/docs/guides/complex-component-structure-deployment/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://ocm.software","url":"https://ocm.software","name":"Home"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://ocm.software/docs/","url":"https://ocm.software/docs/","name":"Docs"}},{"@type":"ListItem","position":4,"item":{"@type":"WebPage","@id":"https://ocm.software/docs/guides/","url":"https://ocm.software/docs/guides/","name":"Guides"}},{"@type":"ListItem","position":5,"item":{"@id":"https://ocm.software/docs/guides/complex-component-structure-deployment/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://ocm.software/#/schema/article/1","headline":"Deployment scenario using an aggregate(d) component","description":"Deploying a microservice architecture with components.","isPartOf":{"@id":"https://ocm.software/docs/guides/complex-component-structure-deployment/"},"mainEntityOfPage":{"@id":"https://ocm.software/docs/guides/complex-component-structure-deployment/"},"datePublished":"2023-06-20T10:00:00CET","dateModified":"2023-06-20T10:00:00CET","author":{"@id":"https://ocm.software/#/schema/person/2"},"publisher":{"@id":"https://ocm.software/#/schema/organization/1"},"image":{"@id":"https://ocm.software/docs/guides/complex-component-structure-deployment/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://ocm.software/#/schema/person/2","name":"","sameAs":[]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://ocm.software/docs/guides/complex-component-structure-deployment/#/schema/image/2","url":null,"contentUrl":null,"caption":"Deployment scenario using an aggregate(d) component"}]}]}</script><meta name=theme-color content="#fff"><link rel=icon href=https://ocm.software/favicon.ico sizes=any><link rel=icon type=image/svg+xml href=https://ocm.software/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=https://ocm.software/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://ocm.software/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://ocm.software/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://ocm.software/site.webmanifest></head><body class="docs single"><div class=sticky-top><header class="navbar navbar-expand-lg navbar-light doks-navbar"><nav class="container-fluid flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand order-0" href=/ aria-label="Open Component Model"><img src=/images/logo-horizontal-white-text.png alt="Open Component Model Logo" class=header-logo></a>
<button class="btn btn-link order-0 ms-auto d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasExample aria-controls=offcanvasExample><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg></button><div class="offcanvas offcanvas-start d-lg-none" tabindex=-1 id=offcanvasExample aria-labelledby=offcanvasExampleLabel><div class=offcanvas-header><h5 class=offcanvas-title id=offcanvasExampleLabel>Browse docs</h5><button type=button class=btn-close data-bs-dismiss=offcanvas aria-label=Close></button></div><div class=offcanvas-body><aside class="doks-sidebar mt-n3"><nav id=doks-docs-nav aria-label="Tertiary navigation"><h3 class="h6 text-capitalize mt-1 mb-1">Overview</h3><hr class="mt-1 mb-1"><ul class="list-unstyled ms-2 mt-2 mb-0"></ul><a class=docs-link href=https://ocm.software/docs/overview/><h3 class="h6 text-capitalize mt-1 mb-1">Overview</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/context/>Context</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/scope/>Scope</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/installation/>Installation</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/contributing/>Contributing</a></li></ul><a class="docs-link active" href=https://ocm.software/docs/guides/><h3 class="h6 text-capitalize mt-1 mb-1">Guides</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/getting-started-with-ocm/>Getting Started with OCM</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/structuring-software-with-ocm/>Structuring Software with OCM</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/deploying-applications-with-ocm-and-gitops/>Deploying Applications with OCM & GitOps</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/air-gapped-gitops-with-ocm-and-flux/>Air-gapped GitOps with OCM & Flux</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/gitops-driven-configuration-of-ocm-applications/>GitOps Driven Configuration of OCM Applications</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/input_and_access/>Input and Access Types</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/best-practices-with-ocm/>Best Practices</a></li><li class=ms-2><a class="docs-link active" href=https://ocm.software/docs/guides/complex-component-structure-deployment/>Deployment scenario using an aggregate(d) component</a></li></ul><a class=docs-link href=https://ocm.software/docs/component-descriptors/><h3 class="h6 text-capitalize mt-1 mb-1">Component Descriptors</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/component-descriptors/version-3/>Version 3</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/component-descriptors/version-2/>Version 2 (legacy)</a></li></ul><a class=docs-link href=https://ocm.software/docs/cli/><h3 class="h6 text-capitalize mt-1 mb-1">Command Line Client</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li><a class=docs-link href=https://ocm.software/docs/cli/add/><h4 class="h6 text-muted ms-1 mt-2 mb-1">add</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/add/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/references/>references</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/resource-configuration/>resource-configuration</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/resources/>resources</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/source-configuration/>source-configuration</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/sources/>sources</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/clean/><h4 class="h6 text-muted ms-1 mt-2 mb-1">clean</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/clean/cache/>cache</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/create/><h4 class="h6 text-muted ms-1 mt-2 mb-1">create</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/create/componentarchive/>componentarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/create/rsakeypair/>rsakeypair</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/create/transportarchive/>transportarchive</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/describe/><h4 class="h6 text-muted ms-1 mt-2 mb-1">describe</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/describe/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/describe/plugins/>plugins</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/download/><h4 class="h6 text-muted ms-1 mt-2 mb-1">download</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/download/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/resources/>resources</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/get/><h4 class="h6 text-muted ms-1 mt-2 mb-1">get</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/get/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/credentials/>credentials</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/plugins/>plugins</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/references/>references</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/resources/>resources</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/sources/>sources</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/show/><h4 class="h6 text-muted ms-1 mt-2 mb-1">show</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/show/tags/>tags</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/show/versions/>versions</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/sign/><h4 class="h6 text-muted ms-1 mt-2 mb-1">sign</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/sign/componentversions/>componentversions</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/><h4 class="h6 text-muted ms-1 mt-2 mb-1">transfer</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/commontransportarchive/>commontransportarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/componentarchive/>componentarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/componentversions/>componentversions</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/verify/><h4 class="h6 text-muted ms-1 mt-2 mb-1">verify</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/verify/componentversions/>componentversions</a></li></ul></ul><a class=docs-link href=https://ocm.software/docs/controller-reference/><h3 class="h6 text-capitalize mt-1 mb-1">Kubernetes Controllers</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/controller-reference/installation/>Installation</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/ocm-controller/><h4 class="h6 text-muted ms-1 mt-2 mb-1">OCM Controller</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/ocm-controller/component-version/>Component Version</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/controller-reference/replication-controller/><h4 class="h6 text-muted ms-1 mt-2 mb-1">Replication Controller</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/replication-controller/component-subscription/>Component Subscription</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/><h4 class="h6 text-muted ms-1 mt-2 mb-1">API Reference</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/ocm-controller/>OCM Controller API v1</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/replication-controller/>Replication Controller API v1</a></li></ul></ul></nav></aside></div></div><button class="btn btn-menu order-2 d-block d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="offcanvas-header d-lg-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a href=/>Open Component Model</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body p-4 p-lg-0 align-self-end"><ul class="nav flex-column flex-lg-row align-items-lg-center mt-2 mt-lg-0 ms-lg-2"><li class=nav-item><a class="nav-link ps-0 py-1 active" href=/docs/overview/context>Docs</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/spec/>Spec</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/project/about>Project</a></li></ul><ul class="nav flex-column flex-lg-row"><li class=nav-item><a class="nav-link social-link" href=https://github.com/open-component-model><svg width="36" height="36" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59C5.87 15.66 6.02 15.42 6.02 15.21 6.02 15.02 6.01 14.39 6.01 13.72 4 14.09 3.48 13.23 3.32 12.78 3.23 12.55 2.84 11.84 2.5 11.65 2.22 11.5 1.82 11.13 2.49 11.12 3.12 11.11 3.57 11.7 3.72 11.94 4.44 13.15 5.59 12.81 6.05 12.6 6.12 12.08 6.33 11.73 6.56 11.53 4.78 11.33 2.92 10.64 2.92 7.58c0-.87.31-1.59.82-2.15C3.66 5.23 3.38 4.41 3.82 3.31c0 0 .67-.21 2.2.82C6.66 3.95 7.34 3.86 8.02 3.86S9.38 3.95 10.02 4.13c1.53-1.04 2.2-.82 2.2-.82C12.66 4.41 12.38 5.23 12.3 5.43 12.81 5.99 13.12 6.7 13.12 7.58c0 3.07-1.87 3.75-3.65 3.95C9.76 11.78 10.01 12.26 10.01 13.01 10.01 14.08 10 14.94 10 15.21 10 15.42 10.15 15.67 10.55 15.59 13.71 14.53 16 11.53 16 8c0-4.42-3.58-8-8-8z" fill="#f3f3f3"/></svg><small class="ms-2 d-lg-none">GitHub</small></a></li></ul></div></div></nav></header></div><div class=container-fluid><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><h3 class="h6 text-capitalize mt-1 mb-1">Overview</h3><hr class="mt-1 mb-1"><ul class="list-unstyled ms-2 mt-2 mb-0"></ul><a class=docs-link href=https://ocm.software/docs/overview/><h3 class="h6 text-capitalize mt-1 mb-1">Overview</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/context/>Context</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/scope/>Scope</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/installation/>Installation</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/contributing/>Contributing</a></li></ul><a class="docs-link active" href=https://ocm.software/docs/guides/><h3 class="h6 text-capitalize mt-1 mb-1">Guides</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/getting-started-with-ocm/>Getting Started with OCM</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/structuring-software-with-ocm/>Structuring Software with OCM</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/deploying-applications-with-ocm-and-gitops/>Deploying Applications with OCM & GitOps</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/air-gapped-gitops-with-ocm-and-flux/>Air-gapped GitOps with OCM & Flux</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/gitops-driven-configuration-of-ocm-applications/>GitOps Driven Configuration of OCM Applications</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/input_and_access/>Input and Access Types</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/best-practices-with-ocm/>Best Practices</a></li><li class=ms-2><a class="docs-link active" href=https://ocm.software/docs/guides/complex-component-structure-deployment/>Deployment scenario using an aggregate(d) component</a></li></ul><a class=docs-link href=https://ocm.software/docs/component-descriptors/><h3 class="h6 text-capitalize mt-1 mb-1">Component Descriptors</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/component-descriptors/version-3/>Version 3</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/component-descriptors/version-2/>Version 2 (legacy)</a></li></ul><a class=docs-link href=https://ocm.software/docs/cli/><h3 class="h6 text-capitalize mt-1 mb-1">Command Line Client</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li><a class=docs-link href=https://ocm.software/docs/cli/add/><h4 class="h6 text-muted ms-1 mt-2 mb-1">add</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/add/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/references/>references</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/resource-configuration/>resource-configuration</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/resources/>resources</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/source-configuration/>source-configuration</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/sources/>sources</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/clean/><h4 class="h6 text-muted ms-1 mt-2 mb-1">clean</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/clean/cache/>cache</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/create/><h4 class="h6 text-muted ms-1 mt-2 mb-1">create</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/create/componentarchive/>componentarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/create/rsakeypair/>rsakeypair</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/create/transportarchive/>transportarchive</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/describe/><h4 class="h6 text-muted ms-1 mt-2 mb-1">describe</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/describe/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/describe/plugins/>plugins</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/download/><h4 class="h6 text-muted ms-1 mt-2 mb-1">download</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/download/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/resources/>resources</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/get/><h4 class="h6 text-muted ms-1 mt-2 mb-1">get</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/get/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/credentials/>credentials</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/plugins/>plugins</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/references/>references</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/resources/>resources</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/sources/>sources</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/show/><h4 class="h6 text-muted ms-1 mt-2 mb-1">show</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/show/tags/>tags</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/show/versions/>versions</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/sign/><h4 class="h6 text-muted ms-1 mt-2 mb-1">sign</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/sign/componentversions/>componentversions</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/><h4 class="h6 text-muted ms-1 mt-2 mb-1">transfer</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/commontransportarchive/>commontransportarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/componentarchive/>componentarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/componentversions/>componentversions</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/verify/><h4 class="h6 text-muted ms-1 mt-2 mb-1">verify</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/verify/componentversions/>componentversions</a></li></ul></ul><a class=docs-link href=https://ocm.software/docs/controller-reference/><h3 class="h6 text-capitalize mt-1 mb-1">Kubernetes Controllers</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/controller-reference/installation/>Installation</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/ocm-controller/><h4 class="h6 text-muted ms-1 mt-2 mb-1">OCM Controller</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/ocm-controller/component-version/>Component Version</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/controller-reference/replication-controller/><h4 class="h6 text-muted ms-1 mt-2 mb-1">Replication Controller</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/replication-controller/component-subscription/>Component Subscription</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/><h4 class="h6 text-muted ms-1 mt-2 mb-1">API Reference</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/ocm-controller/>OCM Controller API v1</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/replication-controller/>Replication Controller API v1</a></li></ul></ul></nav></aside></div><div class="wrap container-fluid" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav id=docs-sidebar class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar mt-0 mb-0"><ul class="list-unstyled ms-0 mt-5 mb-0"></ul><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-3b878279a04dc47d60932cb294d96259 aria-expanded=false><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">Overview</h3></button><div class=collapse id=section-3b878279a04dc47d60932cb294d96259><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/overview/context/>Context</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/overview/scope/>Scope</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/overview/installation/>Installation</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/overview/contributing/>Contributing</a></li></ul></div></li><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-45389ee90014e0938cb09409b9a8794d aria-expanded=true><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">Guides</h3></button><div class="collapse show" id=section-45389ee90014e0938cb09409b9a8794d><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/getting-started-with-ocm/>Getting Started with OCM</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/structuring-software-with-ocm/>Structuring Software with OCM</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/deploying-applications-with-ocm-and-gitops/>Deploying Applications with OCM & GitOps</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/air-gapped-gitops-with-ocm-and-flux/>Air-gapped GitOps with OCM & Flux</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/gitops-driven-configuration-of-ocm-applications/>GitOps Driven Configuration of OCM Applications</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/input_and_access/>Input and Access Types</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/best-practices-with-ocm/>Best Practices</a></li><li><a class="docs-link rounded active" href=https://ocm.software/docs/guides/complex-component-structure-deployment/>Deployment scenario using an aggregate(d) component</a></li></ul></div></li><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-586e8b59e93b90a392c4668ce7563d70 aria-expanded=false><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">Component Descriptors</h3></button><div class=collapse id=section-586e8b59e93b90a392c4668ce7563d70><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/component-descriptors/version-3/>Version 3</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/component-descriptors/version-2/>Version 2 (legacy)</a></li></ul></div></li><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-4020ef13fa7b3dc5342ce3986c5a718f aria-expanded=false><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">cli-reference</h3></button><div class=collapse id=section-4020ef13fa7b3dc5342ce3986c5a718f><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-34ec78fcc91ffb1e54cd85e4a0924332 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">add</h5></button><div class=collapse id=section-34ec78fcc91ffb1e54cd85e4a0924332><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/componentversions/>componentversions</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/references/>references</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/resource-configuration/>resource-configuration</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/resources/>resources</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/source-configuration/>source-configuration</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/sources/>sources</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-123402c04dcfb6625f688f771a5fc05d aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">clean</h5></button><div class=collapse id=section-123402c04dcfb6625f688f771a5fc05d><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/clean/cache/>cache</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-76ea0bebb3c22822b4f0dd9c9fd021c5 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">create</h5></button><div class=collapse id=section-76ea0bebb3c22822b4f0dd9c9fd021c5><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/create/componentarchive/>componentarchive</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/create/rsakeypair/>rsakeypair</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/create/transportarchive/>transportarchive</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-0d16430e9f0aa8879ba9dac2540543fc aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">describe</h5></button><div class=collapse id=section-0d16430e9f0aa8879ba9dac2540543fc><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/describe/artifacts/>artifacts</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/describe/plugins/>plugins</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-fd456406745d816a45cae554c788e754 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">download</h5></button><div class=collapse id=section-fd456406745d816a45cae554c788e754><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/download/artifacts/>artifacts</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/download/componentversions/>componentversions</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/download/resources/>resources</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-b5eda0a74558a342cf659187f06f746f aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">get</h5></button><div class=collapse id=section-b5eda0a74558a342cf659187f06f746f><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/artifacts/>artifacts</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/componentversions/>componentversions</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/credentials/>credentials</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/plugins/>plugins</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/references/>references</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/resources/>resources</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/sources/>sources</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-a7dd12b1dab17d25467b0b0a4c8d4a92 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">show</h5></button><div class=collapse id=section-a7dd12b1dab17d25467b0b0a4c8d4a92><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/show/tags/>tags</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/show/versions/>versions</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-04b29480233f4def5c875875b6bdc3b1 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">sign</h5></button><div class=collapse id=section-04b29480233f4def5c875875b6bdc3b1><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/sign/componentversions/>componentversions</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-84a0f3455dcca894ace136be62efa292 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">transfer</h5></button><div class=collapse id=section-84a0f3455dcca894ace136be62efa292><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/transfer/artifacts/>artifacts</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/transfer/commontransportarchive/>commontransportarchive</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/transfer/componentarchive/>componentarchive</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/transfer/componentversions/>componentversions</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-e8418d1d706cd73548f9f16f1d55ad6e aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">verify</h5></button><div class=collapse id=section-e8418d1d706cd73548f9f16f1d55ad6e><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/verify/componentversions/>componentversions</a></li></ul></div></li></ul></div></li><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8953fee62c09283faf60084f6db3826e aria-expanded=false><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">Kubernetes Controllers</h3></button><div class=collapse id=section-8953fee62c09283faf60084f6db3826e><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/installation/>Installation</a></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-77c54d2a9106c22e3bc203d8b35bd627 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">OCM Controller</h5></button><div class=collapse id=section-77c54d2a9106c22e3bc203d8b35bd627><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/ocm-controller/component-version/>Component Version</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-be2844c305a730ff0fbae91208e810c3 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">Replication Controller</h5></button><div class=collapse id=section-be2844c305a730ff0fbae91208e810c3><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/replication-controller/component-subscription/>Component Subscription</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-05b017e42952fddf972dcdfddede5740 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">API Reference</h5></button><div class=collapse id=section-05b017e42952fddf972dcdfddede5740><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/api-reference/ocm-controller/>OCM Controller API v1</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/api-reference/replication-controller/>Replication Controller API v1</a></li></ul></div></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=d-xl-none><button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type=button data-bs-toggle=collapse data-bs-target=#onThisPage aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle On this page navigation">
<span>On this page</span>
<span><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></span></button><div class=collapse id=onThisPage><div class="card card-body mt-3 py-1"><div class=page-links><nav id=TableOfContents><ul><li><a href=#prerequisite>Prerequisite</a></li><li><a href=#constructing-the-component>Constructing the Component</a><ul><li><a href=#component-file>Component File</a></li><li><a href=#podinfo-components>Podinfo Components</a></li></ul></li><li><a href=#constructing-the-kubernetes-objects>Constructing the Kubernetes Objects</a><ul><li><a href=#componentversion>ComponentVersion</a></li><li><a href=#componentdescriptor>ComponentDescriptor</a></li><li><a href=#localizations-configurations-and-fluxdeployer>Localizations, Configurations and FluxDeployer</a></li></ul></li><li><a href=#understanding-the-moving-parts>Understanding the moving parts</a><ul><li><a href=#localization>Localization</a></li><li><a href=#configuration>Configuration</a></li><li><a href=#fluxdeployer>FluxDeployer</a></li></ul></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#controller-logs>Controller Logs</a></li><li><a href=#object-statuses>Object statuses</a></li><li><a href=#common-issues>Common issues</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></div></div><div class="page-links d-none d-xl-block"><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#prerequisite>Prerequisite</a></li><li><a href=#constructing-the-component>Constructing the Component</a><ul><li><a href=#component-file>Component File</a></li><li><a href=#podinfo-components>Podinfo Components</a></li></ul></li><li><a href=#constructing-the-kubernetes-objects>Constructing the Kubernetes Objects</a><ul><li><a href=#componentversion>ComponentVersion</a></li><li><a href=#componentdescriptor>ComponentDescriptor</a></li><li><a href=#localizations-configurations-and-fluxdeployer>Localizations, Configurations and FluxDeployer</a></li></ul></li><li><a href=#understanding-the-moving-parts>Understanding the moving parts</a><ul><li><a href=#localization>Localization</a></li><li><a href=#configuration>Configuration</a></li><li><a href=#fluxdeployer>FluxDeployer</a></li></ul></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#controller-logs>Controller Logs</a></li><li><a href=#object-statuses>Object statuses</a></li><li><a href=#common-issues>Common issues</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></nav><main class="docs-content container-xxl col-lg-11 col-xl-9"><h1>Deployment scenario using an aggregate(d) component</span></h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=d-xl-none><button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type=button data-bs-toggle=collapse data-bs-target=#onThisPage aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle On this page navigation">
<span>On this page</span>
<span><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></span></button><div class=collapse id=onThisPage><div class="card card-body mt-3 py-1"><div class=page-links><nav id=TableOfContents><ul><li><a href=#prerequisite>Prerequisite</a></li><li><a href=#constructing-the-component>Constructing the Component</a><ul><li><a href=#component-file>Component File</a></li><li><a href=#podinfo-components>Podinfo Components</a></li></ul></li><li><a href=#constructing-the-kubernetes-objects>Constructing the Kubernetes Objects</a><ul><li><a href=#componentversion>ComponentVersion</a></li><li><a href=#componentdescriptor>ComponentDescriptor</a></li><li><a href=#localizations-configurations-and-fluxdeployer>Localizations, Configurations and FluxDeployer</a></li></ul></li><li><a href=#understanding-the-moving-parts>Understanding the moving parts</a><ul><li><a href=#localization>Localization</a></li><li><a href=#configuration>Configuration</a></li><li><a href=#fluxdeployer>FluxDeployer</a></li></ul></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#controller-logs>Controller Logs</a></li><li><a href=#object-statuses>Object statuses</a></li><li><a href=#common-issues>Common issues</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></div></div><div class="page-links d-none d-xl-block"><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#prerequisite>Prerequisite</a></li><li><a href=#constructing-the-component>Constructing the Component</a><ul><li><a href=#component-file>Component File</a></li><li><a href=#podinfo-components>Podinfo Components</a></li></ul></li><li><a href=#constructing-the-kubernetes-objects>Constructing the Kubernetes Objects</a><ul><li><a href=#componentversion>ComponentVersion</a></li><li><a href=#componentdescriptor>ComponentDescriptor</a></li><li><a href=#localizations-configurations-and-fluxdeployer>Localizations, Configurations and FluxDeployer</a></li></ul></li><li><a href=#understanding-the-moving-parts>Understanding the moving parts</a><ul><li><a href=#localization>Localization</a></li><li><a href=#configuration>Configuration</a></li><li><a href=#fluxdeployer>FluxDeployer</a></li></ul></li><li><a href=#troubleshooting>Troubleshooting</a><ul><li><a href=#controller-logs>Controller Logs</a></li><li><a href=#object-statuses>Object statuses</a></li><li><a href=#common-issues>Common issues</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></nav><h2 id=prerequisite>Prerequisite <a href=#prerequisite class=anchor aria-hidden=true>#</a></h2><p>We assume that the reader has already read all the previous guides in the component area. This guide discusses a more
complex scenario using plain Localizations and Configurations without the use of <a href=https://github.com/open-component-model/unpacker-controller>Unpacker</a>.</p><h2 id=constructing-the-component>Constructing the Component <a href=#constructing-the-component class=anchor aria-hidden=true>#</a></h2><p>We are going to use <a href=https://github.com/stefanprodan/podinfo>podinfo</a> in microservices mode. This enables us to deploy several components and configure them
individually.</p><p>Podinfo has three services which we are going to model using individual component descriptors.</p><ul><li>backend</li><li>frontend</li><li>cache (redis)</li></ul><p>We will use the following example application to demonstrate a multi-component structure using <code>podinfo</code>: <a href=https://github.com/open-component-model/podinfo>Podinfo Component</a>.</p><p>This repository contains the following items:</p><h3 id=component-file>Component File <a href=#component-file class=anchor aria-hidden=true>#</a></h3><p>The following component file describes four components: three components that represent the podinfo microservices and one <em>aggregate</em> component that brings together the podinfo components using <em>references</em>. We refer to the aggregate component as the <em>product component</em>.</p><pre><code class=language-yaml>components:
# -- product component
- name: ocm.software/podinfo
  version: 1.0.2
  labels:
  - name: ocm.software/labels/podinfo/purpose
    value:
      - kind: test
        type: manual
  provider:
    name: open-component-model
  componentReferences:
  - name: backend
    componentName: ocm.software/podinfo/backend
    version: 1.0.0
  - name: frontend
    componentName: ocm.software/podinfo/frontend
    version: 1.0.0
  - name: redis
    componentName: ocm.software/redis
    version: 1.0.0
  sources:
  - access:
      commit: ac0afafcf4aa333546634cba631f0090a0a4cbe3
      ref: refs/heads/main
      repoUrl: https://github.com/open-component-model/podinfo
      type: github
    name: github_com_open_component_model_podinfo
    type: git
    version: 1.0.0
# -- backend component
- name: ocm.software/podinfo/backend
  version: 1.0.0
  provider:
    name: open-component-model
  labels:
  - name: ocm.software/labels/podinfo/service
    value: backend
  resources:
  - name: config
    type: configdata.ocm.software
    input:
      type: file
      mediaType: application/yaml
      path: backend/config.yaml
      compress: true
  - name: image
    relation: external
    type: ociImage
    version: 6.2.0
    access:
      type: ociArtifact
      imageReference: ghcr.io/stefanprodan/podinfo:6.2.0
  - name: manifests
    type: kustomize.ocm.fluxcd.io
    input:
      type: dir
      path: backend/manifests
      compress: true
  sources:
  - access:
      commit: 9d294e85d8d3fe7803d1eccbf009619078d30cb9
      ref: refs/heads/main
      repoUrl: https://github.com/open-component-model/podinfo
      type: github
    name: github_com_open_component_model_podinfo
    type: git
    version: 1.0.0
# -- frontend component
- name: ocm.software/podinfo/frontend
  version: 1.0.0
  provider:
    name: open-component-model
  labels:
  - name: ocm.software/labels/podinfo/service
    value: frontend
  resources:
  - name: config
    type: configdata.ocm.software
    input:
      type: file
      mediaType: application/yaml
      path: frontend/config.yaml
      compress: true
  - name: image
    relation: external
    type: ociImage
    version: 6.2.0
    access:
      type: ociArtifact
      imageReference: ghcr.io/stefanprodan/podinfo:6.2.0
  - name: manifests
    type: kustomize.ocm.fluxcd.io
    input:
      type: dir
      path: frontend/manifests
      compress: true
  sources:
  - access:
      commit: 9d294e85d8d3fe7803d1eccbf009619078d30cb9
      ref: refs/heads/main
      repoUrl: https://github.com/open-component-model/podinfo
      type: github
    name: github_com_open_component_model_podinfo
    type: git
    version: 1.0.0
# -- redis component
- name: ocm.software/redis
  version: 1.0.0
  provider:
    name: open-component-model
  labels:
  - name: ocm.software/labels/podinfo/service
    value: redis
  resources:
  - name: config
    type: configdata.ocm.software
    input:
      type: file
      mediaType: application/yaml
      path: redis/config.yaml
      compress: true
  - name: image
    relation: external
    type: ociImage
    version: 6.0.1
    access:
      type: ociArtifact
      imageReference: redis:6.0.1
  - name: manifests
    type: kustomize.ocm.fluxcd.io
    input:
      type: dir
      path: redis/manifests
      compress: true
  sources:
  - access:
      commit: 9d294e85d8d3fe7803d1eccbf009619078d30cb9
      ref: refs/heads/main
      repoUrl: https://github.com/open-component-model/podinfo
      type: github
    name: github_com_open_component_model_podinfo
    type: git
    version: 1.0.0

</code></pre><p>With the components modeled we can start to build a component archive using the <code>ocm</code> cli:</p><pre><code>ocm add componentversions --create --file component-archive components.yaml
processing components.yaml...
  processing document 1...
    processing index 1
    processing index 2
    processing index 3
    processing index 4
found 4 components
adding component ocm.software/podinfo:1.0.2...
  adding reference ocm.software/podinfo/backend: &quot;name&quot;=&quot;backend&quot;,&quot;version&quot;=&quot;1.0.0&quot;...
  adding reference ocm.software/podinfo/frontend: &quot;name&quot;=&quot;frontend&quot;,&quot;version&quot;=&quot;1.0.0&quot;...
  adding reference ocm.software/redis: &quot;name&quot;=&quot;redis&quot;,&quot;version&quot;=&quot;1.0.0&quot;...
adding component ocm.software/podinfo/backend:1.0.0...
  adding resource configdata.ocm.software: &quot;name&quot;=&quot;config&quot;,&quot;version&quot;=&quot;&lt;componentversion&gt;&quot;...
  adding resource ociImage: &quot;name&quot;=&quot;image&quot;,&quot;version&quot;=&quot;6.2.0&quot;...
  adding resource kustomize.ocm.fluxcd.io: &quot;name&quot;=&quot;manifests&quot;,&quot;version&quot;=&quot;&lt;componentversion&gt;&quot;...
adding component ocm.software/podinfo/frontend:1.0.0...
  adding resource configdata.ocm.software: &quot;name&quot;=&quot;config&quot;,&quot;version&quot;=&quot;&lt;componentversion&gt;&quot;...
  adding resource ociImage: &quot;name&quot;=&quot;image&quot;,&quot;version&quot;=&quot;6.2.0&quot;...
  adding resource kustomize.ocm.fluxcd.io: &quot;name&quot;=&quot;manifests&quot;,&quot;version&quot;=&quot;&lt;componentversion&gt;&quot;...
adding component ocm.software/redis:1.0.0...
  adding resource configdata.ocm.software: &quot;name&quot;=&quot;config&quot;,&quot;version&quot;=&quot;&lt;componentversion&gt;&quot;...
  adding resource ociImage: &quot;name&quot;=&quot;image&quot;,&quot;version&quot;=&quot;6.0.1&quot;...
  adding resource kustomize.ocm.fluxcd.io: &quot;name&quot;=&quot;manifests&quot;,&quot;version&quot;=&quot;&lt;componentversion&gt;&quot;...
</code></pre><p>This will create a folder called <code>component-archive</code>. The structure of that should look something like this:</p><pre><code>tree .
.
 artifact-index.json
 blobs
     sha256.03ac3a7611e118d08fcf70e9b7be263c4a7082066f9763f71d8901d7fa2afc9d
     sha256.118b6e8282ee1d335b1638a76a20022b6acc319177dbbce3089700da835afb6a
     sha256.12073781e4fba95f19f046c51c90f0c4e1338d47afe4795bf6fcca163ae46eb8
     sha256.1f239399104ec0cc7680956eb60960d212b3368609feb83dac2c95040d24b480
     sha256.3c9c902ce013ca070a29634e4603c90063c96df632ef2c8e6b4447aaeb70b67e
     sha256.3dc6209959eb782fa6f5f44892f66e9657276735bfb40407bd00ddca30d0a9d1
     sha256.654debd65dbadbcee73e55b675980865ddf22acffcec166c59a5e48a213e4dd5
     sha256.699ea8628e39256048cd1687c496fe64999a41f16f200ef5ce938ee9f19c37f0
     sha256.70a47378c043721e3099801dec02c44b1dd9cdef0ebf79c55784eb4666bdbc29
     sha256.773b28fb63f1195ff73e328744639ddc1c574d58c1e723d6e386fcd66b45bd9c
     sha256.893be914eebd8230ef848ea82b3433c6201152f5d9925e7b5b8d68e0cec7133e
     sha256.92991cf391167c928f3afe6891001f3dd325b64ce800cf34fad4c038141fc57f
     sha256.98ca4d46130f5c09a704b3d8ee9af94de3c0ac73d7e990df53e64606c418fea8
     sha256.a779270c2fea310835d3125de90e089e423c9730a98f1acdda328470d21fced0
     sha256.a7dd532f80e8417ed33cf0c97328582847017895fc5146e499bdf4c94a9d17b5
     sha256.cae4365f264251c616210707aa4765bd95f23fd22f98abc68bae9f58d6e4506d
     sha256.ee79c92bbcce9e7a98f07c6577fd56dd45cf6f7c2d3115216ee249f42119030e
     sha256.f6a82a23220752c232e5f66ce46f0be28b27a5af19474072c77dac6d1feb0c16

2 directories, 19 files
</code></pre><p>These blobs contain the resources we described when modelling our podinfo application. If we <code>cat </code>a random blob we get
something like this:</p><pre><code>cat sha256.3c9c902ce013ca070a29634e4603c90063c96df632ef2c8e6b4447aaeb70b67e
{&quot;componentDescriptorLayer&quot;:{&quot;mediaType&quot;:&quot;application/vnd.ocm.software.component-descriptor.v2+yaml+tar&quot;,&quot;digest&quot;:&quot;sha256:699ea8628e39256048cd1687c496fe64999a41f16f200ef5ce938ee9f19c37f0&quot;,&quot;size&quot;:2560}}%
</code></pre><p>Next, we transfer this component to a location of your choice. Here <code>&lt;your-location></code> for me was <code>ghcr.io/skarlso/demo-component</code>.</p><pre><code>ocm transfer component ./component-archive &lt;your-location&gt;
transferring version &quot;ocm.software/podinfo:1.0.2&quot;...
...adding component version...
transferring version &quot;ocm.software/podinfo/backend:1.0.0&quot;...
...resource 0...
...resource 2...
...adding component version...
transferring version &quot;ocm.software/podinfo/frontend:1.0.0&quot;...
...resource 0...
...resource 2...
...adding component version...
transferring version &quot;ocm.software/redis:1.0.0&quot;...
...resource 0...
...resource 2...
...adding component version...
4 versions transferred
</code></pre><p>With the transfer completed, we now have a component version that we can use and deploy throughout this example.</p><h3 id=podinfo-components>Podinfo Components <a href=#podinfo-components class=anchor aria-hidden=true>#</a></h3><h4 id=backend>Backend <a href=#backend class=anchor aria-hidden=true>#</a></h4><p>The backend files contain the following relevant data:</p><ul><li>manifests<ul><li><code>configmap.yaml</code><ul><li>contains configuration options such as <code>PODINFO_UI_COLOR</code></li></ul></li><li><code>deploy.yaml</code><ul><li>the deployment configuration. <strong>Note</strong> that this deployment yaml contains an attribute <code>image</code> that will be configured using the config.yaml explained below.</li></ul><pre><code class=language-yaml>    spec:
    containers:
    - name: backend
        image: not-an-image
</code></pre></li><li><code>kustomization.yaml</code> makes sure only the relevant files are applied</li><li><code>service.yaml</code> to expose the service endpoint and make discoverable</li></ul></li><li><code>config.yaml</code><ul><li>contains the configuration and localization rules which will be applied to the deployment file.<ul><li>Localization<ul><li>will use an <code>image</code> resource to replace the above value for the atribute <code>image</code> with the correct one</li></ul></li><li>Configuration<ul><li>will use the config information to configure some default values for those values such as color and message.</li></ul></li></ul></li></ul></li></ul><h4 id=frontend>Frontend <a href=#frontend class=anchor aria-hidden=true>#</a></h4><p>Frontend contains the same file structure as backend. The only differences are the deployed services.</p><h4 id=cache>Cache <a href=#cache class=anchor aria-hidden=true>#</a></h4><p>The cache contains the same resources as backend. The only differences are the values of those deployments.</p><h2 id=constructing-the-kubernetes-objects>Constructing the Kubernetes Objects <a href=#constructing-the-kubernetes-objects class=anchor aria-hidden=true>#</a></h2><h3 id=componentversion>ComponentVersion <a href=#componentversion class=anchor aria-hidden=true>#</a></h3><p>We start by creating an image pull secret since the component that we just transferred was placed in a private OCI registry. The pull secret will be
used by the OCM client or OCM controller to access this package in ghcr. To create the secret, run:</p><pre><code>kubectl create secret docker-registry pull-secret -n ocm-system \
    --docker-server=ghcr.io \
    --docker-username=$GITHUB_USER \
    --docker-password=$GITHUB_TOKEN \
    --docker-email=$GITHUB_EMAIL
</code></pre><p>Now we create a <code>ComponentVersion</code> custom resource that will trigger a reconcile of the podinfo component.</p><pre><code class=language-yaml>apiVersion: delivery.ocm.software/v1alpha1
kind: ComponentVersion
metadata:
  name: podinfocomponent-version
  namespace: ocm-system
spec:
  component: ocm.software/podinfo
  interval: 10m0s
  references:
    expand: true
  repository:
    url: &lt;your-location&gt; # this is where you transferred the component to
    secretRef:
      name: pull-secret
  version:
    semver: 1.0.2
</code></pre><p>This will reconcile the <code>ComponentDescriptor</code> for the specific version, making the component metadata available for
other Kubernetes resources to consume. If everything was successful, we can inspect the created component version:</p><pre><code>kubectl describe componentversion -n ocm-system podinfocomponent-version
</code></pre><pre><code class=language-yaml>apiVersion: delivery.ocm.software/v1alpha1
kind: ComponentVersion
metadata:
  name: podinfocomponent-version
  namespace: ocm-system
spec:
  component: ocm.software/podinfo
  interval: 10m0s
  references:
    expand: true
  repository:
    url: &lt;your-location&gt;
  serviceAccountName: admin-account
  version:
    semver: 1.0.2
status:
  componentDescriptor:
    componentDescriptorRef:
      name: ocm.software-podinfo-1.0.2-2456627037531301773
      namespace: ocm-system
    name: ocm.software/podinfo
    references:
    - componentDescriptorRef:
        name: ocm.software-podinfo-backend-1.0.0-3945706267509967991
        namespace: ocm-system
      name: backend
      version: 1.0.0
    - componentDescriptorRef:
        name: ocm.software-podinfo-frontend-1.0.8-11612684200430752646
        namespace: ocm-system
      name: frontend
      version: 1.0.8
    - componentDescriptorRef:
        name: ocm.software-redis-1.0.0-6199010409340612397
        namespace: ocm-system
      name: redis
      version: 1.0.0
    version: 1.0.2
  conditions:
  - lastTransitionTime: &quot;2023-06-21T10:59:22Z&quot;
    message: 'Applied version: '
    observedGeneration: 1
    reason: Succeeded
    status: &quot;True&quot;
    type: Ready
  observedGeneration: 1
  reconciledVersion: 1.0.2

</code></pre><p>The important bits here are the <code>references</code>. These are all the components that the top component contains. These references are used to fetch and identify component dependencies. This component will also contain which version was last reconciled.</p><h3 id=componentdescriptor>ComponentDescriptor <a href=#componentdescriptor class=anchor aria-hidden=true>#</a></h3><p>We can also examine the component descriptors using the following command:
<code>kubectl get componentdescriptors</code></p><pre><code class=language-yaml>apiVersion: delivery.ocm.software/v1alpha1
kind: ComponentDescriptor
metadata:
  name: ocm.software-podinfo-backend-1.0.0-3945706267509967991
  namespace: ocm-system
spec:
  resources:
  - access:
      globalAccess:
        digest: sha256:4a9fd7d9d861aff437746c170b199d15539044405f1b822e316ef49ac5f99db8
        mediaType: application/yaml
        ref: ghcr.io/skarlso/podify/component-descriptors/ocm.software/podinfo/backend
        size: 354
        type: ociBlob
      localReference: sha256:4a9fd7d9d861aff437746c170b199d15539044405f1b822e316ef49ac5f99db8
      mediaType: application/yaml
      type: localBlob
    name: config
    relation: local
    type: configdata.ocm.software
    version: 1.0.0
  - access:
      imageReference: ghcr.io/stefanprodan/podinfo:6.2.0
      type: ociArtifact
    name: image
    relation: external
    type: ociImage
    version: 6.2.0
  - access:
      globalAccess:
        digest: sha256:c61bc74d0b5ecfcca20b447c10d97d07a3cec649e1fc57a25f08fc93fcf42fde
        mediaType: application/x-tgz
        ref: ghcr.io/skarlso/podify/component-descriptors/ocm.software/podinfo/backend
        size: 963
        type: ociBlob
      localReference: sha256:c61bc74d0b5ecfcca20b447c10d97d07a3cec649e1fc57a25f08fc93fcf42fde
      mediaType: application/x-tgz
      type: localBlob
    name: manifests
    relation: local
    type: kustomize.ocm.fluxcd.io
    version: 1.0.0
  version: 1.0.0
</code></pre><p>This descriptor specifies the location of the component&rsquo;s resource based on the current context (<code>globalAccess</code>). We can use this information to retrieve the resource from a storage layer that is accessible within our current environment.</p><h3 id=localizations-configurations-and-fluxdeployer>Localizations, Configurations and FluxDeployer <a href=#localizations-configurations-and-fluxdeployer class=anchor aria-hidden=true>#</a></h3><p>Here, we will create the localization and configuration YAML by hand and then apply it to the cluster.</p><p>We have to create three of each of these components. Localization, Configuration and a FluxDeployer. One for each
component version.</p><h4 id=backend-1>Backend <a href=#backend-1 class=anchor aria-hidden=true>#</a></h4><p>Both, localization and configuration, are in the ConfigData object. So we point to that. The controller will use the
<code>image</code> resource to localize the backend image. This is how it&rsquo;s defined in the localizations rule:</p><pre><code class=language-yaml>localization:
- resource:
    name: image
  file: deploy.yaml
  image: spec.template.spec.containers[0].image
</code></pre><p>Now, let&rsquo;s construct these objects:</p><pre><code class=language-yaml># Localization
apiVersion: delivery.ocm.software/v1alpha1
kind: Localization
metadata:
  name: backend-localization
  namespace: ocm-system
spec:
  configRef:
    kind: ComponentVersion
    name: podinfocomponent-version
    namespace: ocm-system
    resourceRef:
      name: config
      referencePath:
      - name: backend
      version: 1.0.0
  interval: 10m0s
  sourceRef:
    kind: ComponentVersion
    name: podinfocomponent-version
    namespace: ocm-system
    resourceRef:
      name: manifests
      referencePath:
      - name: backend
      version: 1.0.0
</code></pre><pre><code class=language-yaml># Configuration
apiVersion: delivery.ocm.software/v1alpha1
kind: Configuration
metadata:
  name: backend-configuration
  namespace: ocm-system
spec:
  configRef:
    kind: ComponentVersion
    name: podinfocomponent-version
    namespace: ocm-system
    resourceRef:
      name: config
      referencePath:
      - name: backend
      version: 1.0.0
  interval: 10m0s
  sourceRef:
    apiVersion: delivery.ocm.software/v1alpha1
    kind: Localization
    name: backend-localization
    namespace: ocm-system
</code></pre><p>Finally, let&rsquo;s add the FluxDeployer too, which makes sure that this component is deployed to the target location.</p><pre><code class=language-yaml># FluxDeployer
apiVersion: delivery.ocm.software/v1alpha1
kind: FluxDeployer
metadata:
  name: backend-kustomization
  namespace: ocm-system
spec:
  kustomizationTemplate:
    prune: true
    targetNamespace: default
  sourceRef:
    apiVersion: delivery.ocm.software/v1alpha1
    kind: Configuration
    name: backend-configuration
    namespace: ocm-system
</code></pre><p>And that&rsquo;s it.</p><p>The components can be found under <a href=https://github.com/open-component-model/podinfo/tree/f6fd27a94a5cf39784754858bd2a139bd90e0ad9/backend/components>podinfo/backend/components</a>.</p><p>To apply them, simply run this command from the podinfo root:</p><pre><code>kubectl apply -f backend/components
</code></pre><h4 id=frontend-1>Frontend <a href=#frontend-1 class=anchor aria-hidden=true>#</a></h4><p>We do the same for the Frontend component:</p><pre><code class=language-yaml>apiVersion: delivery.ocm.software/v1alpha1
kind: Localization
metadata:
  name: frontend-localization
  namespace: ocm-system
spec:
  configRef:
    kind: ComponentVersion
    name: podinfocomponent-version
    namespace: ocm-system
    resourceRef:
      name: config
      referencePath:
      - name: frontend
      version: 1.0.0
  interval: 10m0s
  sourceRef:
    kind: ComponentVersion
    name: podinfocomponent-version
    namespace: ocm-system
    resourceRef:
      name: manifests
      referencePath:
      - name: frontend
      version: 1.0.0
</code></pre><pre><code class=language-yaml>apiVersion: delivery.ocm.software/v1alpha1
kind: Configuration
metadata:
  name: frontend-configuration
  namespace: ocm-system
spec:
  configRef:
    kind: ComponentVersion
    name: podinfocomponent-version
    namespace: ocm-system
    resourceRef:
      name: config
      referencePath:
      - name: frontend
      version: 1.0.0
  interval: 10m0s
  sourceRef:
    apiVersion: delivery.ocm.software/v1alpha1
    kind: Localization
    name: frontend-localization
    namespace: ocm-system
</code></pre><pre><code class=language-yaml>apiVersion: delivery.ocm.software/v1alpha1
kind: FluxDeployer
metadata:
  name: frontend-kustomization
  namespace: ocm-system
spec:
  kustomizationTemplate:
    prune: true
    targetNamespace: default
  sourceRef:
    apiVersion: delivery.ocm.software/v1alpha1
    kind: Configuration
    name: frontend-configuration
    namespace: ocm-system
</code></pre><p>To apply them, simply run this command from the podinfo root:</p><pre><code>kubectl apply -f frontend/components
</code></pre><h4 id=redis>Redis <a href=#redis class=anchor aria-hidden=true>#</a></h4><p>Redis is exactly the same as the above two. Just with different names and pointing to the redis resource. Try creating
these yourself to see if you understood the structure. If you get stuck, you can always take a peek under
<a href=https://github.com/open-component-model/podinfo/tree/f6fd27a94a5cf39784754858bd2a139bd90e0ad9/redis/components>podinfo/redis/components</a>.</p><p>To apply them, simply run this command from the podinfo root:</p><pre><code>kubectl apply -f redis/components
</code></pre><h2 id=understanding-the-moving-parts>Understanding the moving parts <a href=#understanding-the-moving-parts class=anchor aria-hidden=true>#</a></h2><p>How does the whole flow work?</p><p><img class="img-fluid lazyload blur-up" src=/images/demo-workflow.png alt=flow></p><p>The <code>ocm-controller</code> creates <code>ComponentDescriptor</code> resources for each referenced component version. Those component descriptors
contain all the resources that those versions have, such as manifest files, configuration files, deployment files, etc.</p><p>It will use this dependency graph to lookup resource data in the right component version.</p><p>Let&rsquo;s take a look at each object in the cluster next.</p><pre><code class=language-shell>kubectl get localizations -A
NAMESPACE    NAME                    READY   SOURCE VERSION   CONFIG VERSION   AGE
ocm-system   backend-localization    True    1.0.16           1.0.16           5m
ocm-system   cache-localization      True    1.0.16           1.0.16           5m
ocm-system   frontend-localization   True    1.0.16           1.0.16           5m
  k get configuration -A
NAMESPACE    NAME                     READY   SOURCE VERSION   CONFIG VERSION   AGE
ocm-system   backend-configuration    True    1.0.16           1.0.16           4m25s
ocm-system   cache-configuration      True    1.0.16           1.0.16           4m25s
ocm-system   frontend-configuration   True    1.0.16           1.0.16           4m25s
  k get fluxdeployer -A
NAMESPACE    NAME                     READY   AGE
ocm-system   backend-kustomization    True    3m55s
ocm-system   cache-kustomization      True    3m45s
ocm-system   frontend-kustomization   True    3m35s
  k get snapshot -A
NAMESPACE    NAME                             READY   STATUS
ocm-system   backend-configuration-v5l2oag    True    Snapshot with name 'backend-configuration-v5l2oag' is ready
ocm-system   backend-localization-uvnrzql     True    Snapshot with name 'backend-localization-uvnrzql' is ready
ocm-system   cache-configuration-kcjiqzy      True    Snapshot with name 'cache-configuration-kcjiqzy' is ready
ocm-system   cache-localization-u2h3old       True    Snapshot with name 'cache-localization-u2h3old' is ready
ocm-system   frontend-configuration-ut3u6pm   True    Snapshot with name 'frontend-configuration-ut3u6pm' is ready
ocm-system   frontend-localization-tgqfwwk    True    Snapshot with name 'frontend-localization-tgqfwwk' is ready
  k get componentversion -A
NAMESPACE    NAME                       READY   VERSION   AGE    STATUS
ocm-system   podinfocomponent-version   True    1.0.16    9m8s   Applied version: 1.0.16
  k get componentdescriptor -A
NAMESPACE    NAME                                                       AGE
ocm-system   ocm.software-podinfo-1.0.16-2456627037531301773            9m27s
ocm-system   ocm.software-podinfo-backend-1.0.0-3945706267509967991     9m25s
ocm-system   ocm.software-podinfo-frontend-1.0.8-11612684200430752646   9m23s
ocm-system   ocm.software-redis-1.0.0-6199010409340612397               9m21s
</code></pre><p>All of the components should have their Localization, Configuration, and FluxDeployer.</p><h3 id=localization>Localization <a href=#localization class=anchor aria-hidden=true>#</a></h3><p>A localization should look something like this:</p><pre><code class=language-yaml>apiVersion: delivery.ocm.software/v1alpha1
kind: Localization
metadata:
  name: backend-localization
  namespace: ocm-system
spec:
  configRef:
    kind: ComponentVersion
    name: podinfocomponent-version
    namespace: ocm-system
    resourceRef:
      name: config
      referencePath:
      - name: backend
      version: 1.0.0
  interval: 10m0s
  sourceRef:
    kind: ComponentVersion
    name: podinfocomponent-version
    namespace: ocm-system
    resourceRef:
      name: manifests
      referencePath:
      - name: backend
      version: 1.0.0
status:
  conditions:
  - lastTransitionTime: &quot;2023-06-20T12:28:47Z&quot;
    message: Reconciliation success
    observedGeneration: 1
    reason: Succeeded
    status: &quot;True&quot;
    type: Ready
  latestConfigVersion: 1.0.16
  latestSourceVersion: 1.0.16
  observedGeneration: 1
  snapshotName: backend-localization-uvnrzql
</code></pre><p>The important fields are <code>configRef</code> and <code>sourceRef</code>. The <code>configRef</code> points to the resource that contains our
localization rules:</p><pre><code class=language-yaml>localization:
- resource:
    name: image
  file: deploy.yaml
  image: spec.template.spec.containers[0].image
</code></pre><p>This will change the image in our deployment in the file <code>deploy.yaml</code> to the <code>image</code> resource we have in the podinfo
example.</p><p>The <code>sourceRef</code> is pointing to the component version to fetch the manifests from.</p><h3 id=configuration>Configuration <a href=#configuration class=anchor aria-hidden=true>#</a></h3><p>Let&rsquo;s take a look at the configuration object next (very similar to localization):</p><pre><code class=language-yaml>apiVersion: delivery.ocm.software/v1alpha1
kind: Configuration
metadata:
  name: backend-configuration
  namespace: ocm-system
spec:
  configRef:
    kind: ComponentVersion
    name: podinfocomponent-version
    namespace: ocm-system
    resourceRef:
      name: config
      referencePath:
      - name: backend
      version: 1.0.0
  interval: 10m0s
  sourceRef:
    apiVersion: delivery.ocm.software/v1alpha1
    kind: Localization
    name: backend-localization
    namespace: ocm-system
status:
  conditions:
  - lastTransitionTime: &quot;2023-06-20T12:28:47Z&quot;
    message: Reconciliation success
    observedGeneration: 2
    reason: Succeeded
    status: &quot;True&quot;
    type: Ready
  latestConfigVersion: 1.0.16
  latestSourceVersion: 1.0.16
  observedGeneration: 2
  snapshotName: backend-configuration-v5l2oag
</code></pre><p>The important details here are the <code>configRef</code> field and the <code>sourceRef</code> field. The <code>configRef</code> field defines where the
configuration values are located at:</p><pre><code class=language-yaml>configuration:
  defaults:
    message: &quot;Welcome to the backend service&quot;
  schema:
    type: object
    additionalProperties: false
    properties:
      replicas:
        type: string
      message:
        type: string
  rules:
  - value: (( message ))
    file: configmap.yaml
    path: data.PODINFO_UI_MESSAGE
</code></pre><p><strong>Note</strong>. This configuration has a source that is pointing at the <code>Localization</code> resource that we created. This is
important because the configuration needs to work on the localized entities. Once reconciled, it will create a
<code>Snapshot</code>. That snapshot contains the input resources that have been transformed using the supplied configuration rules.</p><h3 id=fluxdeployer>FluxDeployer <a href=#fluxdeployer class=anchor aria-hidden=true>#</a></h3><p>Next, comes the <code>FluxDeployer</code>. The <code>FluxDeployer</code> will point to the last Snapshot in the chain of transformations
which is the <code>Configuration</code>. It looks something like this:</p><pre><code class=language-yaml>apiVersion: delivery.ocm.software/v1alpha1
kind: FluxDeployer
metadata:
  name: backend-kustomization
  namespace: ocm-system
spec:
  kustomizationTemplate:
    prune: true
    targetNamespace: default
  sourceRef:
    apiVersion: delivery.ocm.software/v1alpha1
    kind: Configuration
    name: backend-configuration
    namespace: ocm-system
status:
  conditions:
  - lastTransitionTime: &quot;2023-06-20T12:29:23Z&quot;
    message: FluxDeployer 'backend-kustomization' is ready
    observedGeneration: 2
    reason: Succeeded
    status: &quot;True&quot;
    type: Ready
  kustomization: ocm-system/backend-kustomization
  observedGeneration: 2
</code></pre><p>This creates a <a href=https://fluxcd.io/flux/components/kustomize/kustomization/>Kustomization</a> object. The Kustomization
object is used to reconcile the created component into the target namespace. We have three of these for each component
for which we would like to apply the results.</p><h2 id=troubleshooting>Troubleshooting <a href=#troubleshooting class=anchor aria-hidden=true>#</a></h2><p>Once all objects are applied, we should see <code>podinfo</code> deployed in the <code>default</code> namespace:</p><pre><code>kubectl get pods
NAME                        READY   STATUS    RESTARTS   AGE
backend-6dd8f5fbf8-xfdmq    1/1     Running   0          54m
frontend-56ff5b9864-h8fgh   1/1     Running   0          54m
redis-7475dd84c4-hzp2b      1/1     Running   0          54m
</code></pre><p><strong>Note</strong>: pod count might vary based on the default settings in the configuration data.</p><p>If the deployment isn&rsquo;t appearing, there are several places to check for errors:</p><p><strong>Flux</strong>:</p><p>Maybe Flux didn&rsquo;t kick in yet. Try to force a reconcile by running:</p><pre><code>flux reconcile source git flux-system -n flux-system
</code></pre><p><strong>Events</strong>:</p><p>Kubernetes Events could hold some extra information. List the most recent ones with:</p><pre><code>kubectl events -A
</code></pre><p><strong>Logs</strong>:</p><p>Sometimes, you can see errors in the <code>source-controller</code> failing to get the right resources. Or <code>kustomize-controller</code>
doesn&rsquo;t understand something. We&rsquo;ll go into getting logs in <a href=#controller-logs>Controller Logs</a> section.</p><p><strong>Object Status</strong>:</p><p>Many of the objects have a status with the most recent error on them. The relevant objects in this case are the
<code>FluxDeployer</code> and the <code>OCIRepository</code> objects. Make sure they have successful statuses.</p><pre><code>kubectl get ocirepositories -A
NAMESPACE    NAME                     URL                                                                        READY   STATUS                                                                                                      AGE
ocm-system   backend-kustomization    oci://registry.ocm-system.svc.cluster.local:5000/sha-3644589785534619751   True    stored artifact for digest '2234@sha256:12100267c60d3eb5acfc564b56eb94288e33fa875c7f2191ec0a662594283ad0'   5m17s
ocm-system   cache-kustomization      oci://registry.ocm-system.svc.cluster.local:5000/sha-3644589785534619751   True    stored artifact for digest '2393@sha256:f12873dff8d8f91b5d917711f0d7d20ebc85dbfc1652bf01c8b50dc198d7f32d'   4m57s
ocm-system   frontend-kustomization   oci://registry.ocm-system.svc.cluster.local:5000/sha-3644589785534619751   True    stored artifact for digest '2539@sha256:1a37fdfbf0f109498b813bbd784a81c8b1a818d4770a49a319cc2562621dcf40'   4m47s
</code></pre><pre><code>kubectl get fluxdeployer -A
NAMESPACE    NAME                     READY   AGE
ocm-system   backend-kustomization    True    8m13s
ocm-system   cache-kustomization      True    7m53s
ocm-system   frontend-kustomization   True    7m43s
</code></pre><h3 id=controller-logs>Controller Logs <a href=#controller-logs class=anchor aria-hidden=true>#</a></h3><p>There are several controllers to sift through in case something doesn&rsquo;t happen the way it should.</p><h4 id=ocm-controller>ocm-controller <a href=#ocm-controller class=anchor aria-hidden=true>#</a></h4><p>To get the <code>ocm-controller</code> logs run:</p><pre><code>kubectl logs `k get pods --template '{{range .items}}{{.metadata.name}}{{end}}' --selector=app=ocm-controller -n ocm-system` -n ocm-system
</code></pre><p>If everything goes according to plan, there should be no errors in the logs.</p><h4 id=flux-controllers>Flux controllers <a href=#flux-controllers class=anchor aria-hidden=true>#</a></h4><p>Flux has a couple of controllers we can check if things don&rsquo;t start up (especially if we don&rsquo;t see any resources in the
cluster, or if we don&rsquo;t see the podinfo deployment being started).</p><p><strong>source-controller</strong>:
This controller will contain information about the latest applied code from the repository. If there is an error here
it means that the source, or rather our modifications, weren&rsquo;t applied.</p><p><strong>kustomize-controller</strong>:
This controller will contain information about reconciled objects. A Kustomization source is usually either a
GitRepository or an OCIRepository. In this case, the source will be an OCIRepositoy. That repository is pointing to
the in-cluster OCI repository. A snapshot creates these entries and that&rsquo;s where it loads the data from.</p><p>The <strong>helm-controller</strong> and <strong>notification-controller</strong> aren&rsquo;t relevant.</p><h3 id=object-statuses>Object statuses <a href=#object-statuses class=anchor aria-hidden=true>#</a></h3><p><strong>ComponentVersion</strong>:</p><p>The <code>ComponentVersion</code> object contains information about what components have been reconciled. We talked about that
earlier at <a href=#componentversion>Component Version</a>. The <code>Status</code> section contains any errors that could have
occurred when reconciling information. If you find that the references section is empty, your component version is missing
<code>expand: true</code> setting.</p><p><strong>ComponentDescriptor</strong>:</p><p>The <code>ComponentDescriptor</code> holds information about each component and their resources. Read more at <a href=#componentdescriptor>ComponentDescriptors</a>.</p><p>If the resources section is empty in the <code>status</code>, there is something wrong reconciling the individual items.</p><p><strong>Localization</strong>:</p><p>The status section contains information about the snapshot that this object created. The snapshot is used to point
to the right repository in the internal OCI cache. It also contains the last applied version. The conditions
section will contain any errors while reconciling the resource.</p><p><strong>Configuration</strong>:</p><p>The status section contains information about the snapshot that this object created. The snapshot is used to point
to the right repository in the internal OCI cache. It also contains the last applied version. The conditions
section will contain any errors while reconciling the resource.</p><p><strong>Snapshots</strong>:</p><p>The Snapshot, most of the time, is transparent to the user. The sources are Snapshot providers. That means any object
that can produce a Snapshot can be a source to a Localization, Configuration or a Resource object. A Source is a thing
from which to fetch resource data such as Manifests, rules, Markdown files, descriptors, etc.</p><p>We can also use Snapshots to look for errors in reconciling resource data. A Snapshot&rsquo;s status contains information.</p><pre><code class=language-yaml>apiVersion: delivery.ocm.software/v1alpha1
kind: Snapshot
metadata:
  creationTimestamp: &quot;2023-06-21T10:49:35Z&quot;
  finalizers:
  - finalizers.snapshot.ocm.software
  generation: 2
  name: backend-configuration-2agwrnt
  namespace: ocm-system
  ownerReferences:
  - apiVersion: delivery.ocm.software/v1alpha1
    kind: Configuration
    name: backend-configuration
    uid: dfb8dede-5234-406c-8077-fc5e382ec8fd
  resourceVersion: &quot;4591&quot;
  uid: b8c0b983-9c27-4597-92b1-fe19aad2abca
spec:
  digest: sha256:1f5f6173f3180c2fda00dd1267ca190628a2e8b5fa707232cebc9059f7845e29
  identity:
    component-name: ocm.software-podinfo-1.0.16-2456627037531301773
    component-version: 1.0.16
    resource-name: config
    resource-version: 1.0.0
  tag: &quot;1533&quot;
status:
  conditions:
  - lastTransitionTime: &quot;2023-06-21T10:49:35Z&quot;
    message: Snapshot with name 'backend-configuration-2agwrnt' is ready
    observedGeneration: 2
    reason: Succeeded
    status: &quot;True&quot;
    type: Ready
  digest: sha256:1f5f6173f3180c2fda00dd1267ca190628a2e8b5fa707232cebc9059f7845e29
  observedGeneration: 2
  repositoryURL: http://registry.ocm-system.svc.cluster.local:5000/sha-2819236492453137798
  tag: &quot;1533&quot;
</code></pre><p>This Snapshot contains a lot of information about what has been replicated in the internal registry. We can use <code>crane</code>
to fetch it and check the generated content.</p><p><strong>FluxDeployer</strong>:</p><p>FluxDeployer is used to apply the generated objects to a cluster. In the background, it&rsquo;s leveraging Flux&rsquo;s
Kustomization object. This object&rsquo;s status will contain any errors that could occur during applying generated content,
like invalid data, invalid CRDs, invalid yaml, no access to the cluster, permission issues, etc. Each component has a
<code>FluxDeployer</code> applying some kind of component data to the cluster such as, Deployments, ConfigMaps,
ReplicaSets, etc.</p><p><strong>OCIRepository</strong>:</p><p>There should be one OCIRepository resource per component. The OCIRepository is created by the FluxDeployer. OCIRepository will
contain any errors regarding the content of the internal registry.</p><p><strong>Kustomization</strong>:</p><p>Kustomization objects are also created by the FluxDeployer. These objects will contain applying errors.</p><h3 id=common-issues>Common issues <a href=#common-issues class=anchor aria-hidden=true>#</a></h3><p><strong>tar header invalid</strong>:</p><p>Usually, this means that the content we are trying to sync from the OCIRepository is not a tar file. This can happen if
the resource wasn&rsquo;t a <code>Directory</code> or if the fetching of the data somehow failed.</p><p>To verify, we can use <a href=https://github.com/google/go-containerregistry/blob/main/cmd/crane/doc/crane.md>crane</a> to check the content.</p><p>To run crane, first, expose the internal registry using <code>port-forward</code> like this:</p><pre><code>kubectl port-forward service/registry -n ocm-system 5000:5000
</code></pre><p>Then, verify that the connection is working by running a <code>catalog</code> command:</p><pre><code>crane catalog http://127.0.0.1:5000
</code></pre><p>This should list something like this:</p><pre><code>crane catalog 127.0.0.1:5000
sha-10883673987458280187
sha-16809550111814969680
sha-1990151198423805921
sha-2092408510764941850
sha-2819236492453137798
sha-6687852683187729914
sha-9139473762086563639
</code></pre><p>To identify which of these contains our failed resource, check the failing OCIRepository object.</p><pre><code>kubectl get ocirepository -A
NAMESPACE    NAME      URL                                                                         READY   STATUS                                                                                       AGE
ocm-system   podinfo   oci://registry.ocm-system.svc.cluster.local:5000/sha-10883673987458280187   False   failed to extract layer contents from artifact: tar error: archive/tar: invalid tar header   21h
</code></pre><p>Now we know which of these contains the invalid resource. We can further identify which blob it is by either, describing the
relevant snapshot, or by running a <code>manifest</code> command with crane.</p><pre><code>crane manifest 127.0.0.1:5000/sha-10883673987458280187:1.0.0|jq
{
  &quot;schemaVersion&quot;: 2,
  &quot;mediaType&quot;: &quot;application/vnd.docker.distribution.manifest.v2+json&quot;,
  &quot;config&quot;: {
    &quot;mediaType&quot;: &quot;application/vnd.docker.container.image.v1+json&quot;,
    &quot;size&quot;: 233,
    &quot;digest&quot;: &quot;sha256:6e3b5d3bfbd044c33125f20d83c2b82cd1c348b58422df4859678bc0e6c8aed5&quot;
  },
  &quot;layers&quot;: [
    {
      &quot;mediaType&quot;: &quot;application/vnd.oci.image.layer.v1.tar+gzip&quot;,
      &quot;size&quot;: 1044,
      &quot;digest&quot;: &quot;sha256:eae39564a446ee92d1fec8728ef0c27077995d01bbedc25e0688a1cbb7582adc&quot;
    }
  ]
}
</code></pre><p>One of these will not be what they seem. To fetch a blob run:</p><pre><code>crane blob 127.0.0.1:5000/sha-10883673987458280187@sha256:eae39564a446ee92d1fec8728ef0c27077995d01bbedc25e0688a1cbb7582adc &gt; temp.tar
</code></pre><p>And then check what that <code>temp.tar</code> looks like. If the content is human-readable, there is a problem. If you encounter
the <code>component descriptor</code> file, you can skip that. That&rsquo;s not what you are looking for.</p><h2 id=conclusion>Conclusion <a href=#conclusion class=anchor aria-hidden=true>#</a></h2><p>We saw how to deploy a complex, multi-service architecture using the podinfo application.</p><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"></div><div class="docs-navigation d-flex justify-content-between"><a href=/docs/guides/best-practices-with-ocm/><div class="card my-1"><div class="card-body py-2">&larr; Best Practices</div></div></a><a class=ms-auto href=/docs/component-descriptors/version-2/><div class="card my-1"><div class="card-body py-2">Version 2 (legacy) &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-fluid><div class="row justify-content-center"><div class=col-lg-12><p class=text-center><small> Copyright 2023, SAP SE and Open Component Model Contributors | <a href=/privacy-policy/>Privacy Policy</a> | <a href=https://www.sap.com/corporate/en/legal/terms-of-use.html>Terms of Use</a> | <a href=/legal>Legal</a></small></p></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.54bf0932b8a36d0e152b1635b099a6ef1394d35327e2437550a075c9c8ed1bd8aed5847c21b36fc02ed24014c031d9ca24017b0c78b1639d7e2fa8329898b842.js integrity="sha512-VL8JMrijbQ4VKxY1sJmm7xOU01Mn4kN1UKB1ycjtG9iu1YR8IbNvwC7SQBTAMdnKJAF7DHixY51+L6gymJi4Qg==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.56a414730f1135fe77b5ea30bf74a2cc4101a6f386e85e5b789c800570cc33d33054000f45932c053a59b41018f72687867254a80e1b9710671852492533162f.js integrity="sha512-VqQUcw8RNf53teowv3SizEEBpvOG6F5beJyABXDMM9MwVAAPRZMsBTpZtBAY9yaHhnJUqA4blxBnGFJJJTMWLw==" crossorigin=anonymous defer></script>
<script src=/main.min.867372088b3d9d28e68d38f8a8365d28934d875dc849d445fe06cc02a75d29286fa27e6ab5f9820c0d5bdcf90711a1ee7a4d89a7e0bee27ebb521ecd1c1f0175.js integrity="sha512-hnNyCIs9nSjmjTj4qDZdKJNNh13ISdRF/gbMAqddKShvon5qtfmCDA1b3PkHEaHuek2Jp+C+4n67Uh7NHB8BdQ==" crossorigin=anonymous defer></script></body></html>